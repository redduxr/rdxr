<!DOCTYPE html>
<html>
<head>
	<title>Keyboard Polling Rate Tester</title>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<style>
		body {
			font-family: Arial, sans-serif;
			margin: 0;
			padding: 0;
		}
		
		.container {
			display: flex;
			flex-direction: column;
			align-items: center;
			justify-content: center;
			height: 100vh;
		}
		
		.instruction {
			font-size: 1.5rem;
			margin-bottom: 1rem;
		}
		
		.result {
			font-size: 2rem;
			font-weight: bold;
			margin-top: 1rem;
		}
		
		.highest {
			font-size: 1rem;
			margin-top: 0.5rem;
		}
	</style>
</head>
<body>
	<div class="container">
		<div class="instruction">Press any key to test your keyboard's polling rate</div>
		<div class="result"></div>
		<div class="highest"></div>
	</div>
	<script>
		var startTime;
		var endTime;
		var pollingRate;
		var highestPollingRate = 0;
		var resultElement = document.querySelector('.result');
		var highestElement = document.querySelector('.highest');
		
		document.addEventListener('keydown', function(e) {
			if (!startTime) {
				startTime = performance.now();
				pollingRate = null;
				resultElement.innerHTML = 'Testing...';
			}
		});
		
		document.addEventListener('keyup', function(e) {
			if (!endTime) {
				endTime = performance.now();
				var elapsed = endTime - startTime;
				pollingRate = Math.round(1000 / elapsed);
				if (pollingRate > highestPollingRate) {
					highestPollingRate = pollingRate;
					highestElement.innerHTML = 'Highest polling rate recorded: ' + highestPollingRate + ' Hz';
				}
				resultElement.innerHTML = 'Your keyboard\'s polling rate is ' + pollingRate + ' Hz';
			}
			startTime = performance.now();
			endTime = null;
			setTimeout(scanPollingRate, 1000);
		});
		
		function scanPollingRate() {
			if (pollingRate) {
				resultElement.innerHTML = 'Your keyboard\'s polling rate is ' + pollingRate + ' Hz';
			} else {
				resultElement.innerHTML = 'Press any key to test your keyboard\'s polling rate';
			}
			highestElement.innerHTML = 'Highest polling rate recorded: ' + highestPollingRate + ' Hz';
			setTimeout(scanPollingRate, 1000);
		}
	</script>
</body>
</html>